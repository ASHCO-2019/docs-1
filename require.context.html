<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=description content=""><meta name=author content=""><title>require.context</title><body><script src=js/doc.js charset=utf-8 async></script><div class=container><div class=row><div class=col-md-3><div class=logo><ul class=cube-inner><li class=front></li><li class=back></li><li class=right></li><li class=left></li><li class=top></li><li class=bottom></li></ul><ul class=cube><li class=front></li><li class=back></li><li class=right></li><li class=left></li><li class=top></li><li class=bottom></li><li class=floor></li></ul><div class=name>webpack</div><div class=tagline>MODULE BUNDLER</div></div><div class=sidebar><p><a href=.>Home</a></p><h1>webpack</h1><ul><li><a href=webpack-getting-started.html>webpack Getting Started</a></li><li>Basics<ul><li><a href=commonjs.html>CommonJS</a></li><li><a href=amd.html>AMD</a></li><li><a href=webpack-usage.html>webpack usage</a><ul><li><a href=webpack-detailed-usage.html>webpack detailed usage</a></li><li><a href=webpack-options.html>webpack options</a></li><li><a href=https://github.com/webpack/grunt-webpack>webpack with grunt</a></li><li><a href=webpack-plugins.html>webpack plugins</a></li></ul></li><li><a href=chunks.html>chunks</a></li><li><a href=resolving.html>resolving</a></li><li><a href=loaders.html>loaders</a></li><li><a href=loader-list.html>loader list</a></li><li><a href=require.context.html>require.context</a></li><li><a href=require.ensure.html>require.ensure</a></li><li><a href=webpack-dev-tools.html>webpack dev tools</a><ul><li><a href=webpack-dev-server.html>webpack-dev-server</a></li><li><a href=webpack-dev-middleware.html>webpack-dev-middleware</a></li></ul></li><li><a href=webpack-comparison.html>webpack comparison</a></li></ul></li><li>Advanced<ul><li><a href=writing-loaders.html>writing loaders</a></li><li><a href=require.include.html>require.include</a></li><li><a href=writing-webpack-plugins.html>writing webpack plugins</a></li><li><a href=optimizing.html>optimizing</a></li><li><a href=hot-module-replacement.html>Hot Module Replacement</a></li><li><a href=hot-module-replacement-with-webpack.html>Hot Module Replacement with webpack</a></li><li><a href=webpack-runtime-api-summary.html>webpack runtime api summary</a></li></ul></li></ul><hr><ul><li><a href=changelog.html>changelog</a></li><li><a href=roadmap.html>roadmap</a></li><li><a href=ideas.html>ideas</a></li><li><a href=documentation-contributing.html>documentation contributing</a></li></ul></div></div><div class=col-md-9><div class=pull-right><a href=https://github.com/webpack/docs/wiki/require.context/_edit id=wikieditlink>Edit</a></div><div class=row><div class=col-md-12><div class=page-header><h1 id=wikititle>require.context</h1></div></div></div><div class=row><div id=wiki class=col-md-12><pre><code><span class=keyword>var</span> dir = require.context(<span class=string>"./dir"</span>);
<span class=comment>// returns a context function, which behaves like a require</span>
<span class=comment>//  from this directory</span>
require(<span class=string>"./dir/file"</span>) === dir(<span class=string>"./file"</span>);

<span class=comment>// the context function has a property "keys" which is a function</span>
<span class=comment>//  returning all possible parameters.</span>
<span class=comment>// i.e. if "./dir" only contains "file.js" and a subdirectory "sub" with "subfile.js"</span>
dir.keys()
<span class=comment>// =&gt; ["./file.js", "./file", "./sub/subfile.js", "./sub/subfile"]</span>

<span class=comment>// the require.context function can take up to 3 parameters</span>
<span class=comment>// require.context(request, recursive, regExp)</span>
<span class=comment>// - recursive: boolean - should subdirectories be included</span>
<span class=comment>// - regExp: RegExp - create a function that only allows parameters</span>
<span class=comment>//    that matches this RegExp</span>
require.context(<span class=string>"./dir"</span>, <span class=literal>false</span>, <span class=regexp>/^\.\/[^\.]$/</span>).keys()
<span class=comment>// =&gt; ["./file"]</span></code></pre><h2><a class=anchor href=#webpack id=webpack><i class="glyphicon glyphicon-link"></i></a>webpack</h2><pre><code><span class=comment>// webpack automatically creates a "context" when using expressions in the require/define call.</span>
<span class=keyword>var</span> someFile = <span class=string>"file.js"</span>;
require(<span class=string>"./dir/"</span> + someFile);
<span class=comment>// =&gt; is equal to require.context("./dir")("./" + someFile);</span>

<span class=comment>// It can transform complex expressions to regular expressions</span>
<span class=keyword>var</span> x = <span class=string>"il"</span>;
require(<span class=string>"./dir/f"</span> + x + <span class=string>"e"</span>)
<span class=comment>// =&gt; require.context("./dir", true, /^\.\/f.*e$/)("./f" + x + "e")</span>

<span class=comment>// In case you assign the require function to an variable or use it in some unexpected way</span>
<span class=comment>//  webpack automatically creates a context for the current directory</span>
<span class=keyword>var</span> x = require; <span class=comment>// =&gt; var x = require.context(".");</span>
x(<span class=string>"./dir/file"</span>);</code></pre><h3><a class=anchor href=#internals id=internals><i class="glyphicon glyphicon-link"></i></a>Internals</h3><p>webpack reads the directory content and filter it by the provided RegExp. All possible request strings are calculated and resolved like normal requires. As result we have mappings from “possible request” to “module id”. webpack generates a module (called context module) that contains that map and exports a require-like function.</p><p>Example:</p><p>We start with <code>require(<span class=string>"./template/"</span> + templateName + <span class=string>".jade"</span></code>.</p><p>While parsing we extract the directory “/some/path/template” and the RegExp <code>/^\.\/.*\.jade$/</code>.</p><p>The directory is read and filtered by RegExp. As result we get these three possible request strings: <code><span class=string>"./templateA.jade"</span> <span class=string>"./templateB.jade"</span> <span class=string>"./more/templateC.jade"</span></code>.</p><p>After resolving these modules we have a map:</p><pre><code>{
    <span class=string>"./templateA.jade"</span>: <span class=number>23</span>,
    <span class=string>"./templateB.jade"</span>: <span class=number>24</span>,
    <span class=string>"./more/templateC.jade"</span>: <span class=number>25</span>
}
<span class=comment>// 23, 24, 25 are module ids</span></code></pre><p>Given that the context module get the id <code><span class=number>22</span></code>. The original require is rewritten to:</p><pre><code>require(<span class=number>22</span>)(<span class=string>"./"</span> + templateName + <span class=string>".jade"</span>)</code></pre><p>See <a href=https://github.com/webpack/webpack/tree/master/examples/require.context#examplejs>full example here</a>.</p></div></div></div></div></div><a href=https://github.com/webpack/webpack><img style="position: absolute; top: 0; left: 0; border: 0" src=https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png alt="Fork me on GitHub"></a>